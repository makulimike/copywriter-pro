{% extends "base.html" %}

{% block title %}Analytics - Copywriter Pro{% endblock %}

{% block content %}
<h1>ğŸ“ˆ Analytics Dashboard</h1>

<!-- Global Stats -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 2rem 0;">
    <div class="card" style="text-align: center;">
        <div style="font-size: 2.5rem; font-weight: bold; color: #3498db;">{{ total_campaigns }}</div>
        <div style="color: #7f8c8d;">Campaigns</div>
    </div>
    <div class="card" style="text-align: center;">
        <div style="font-size: 2.5rem; font-weight: bold; color: #27ae60;">{{ total_leads }}</div>
        <div style="color: #7f8c8d;">Total Leads</div>
    </div>
    <div class="card" style="text-align: center;">
        <div style="font-size: 2.5rem; font-weight: bold; color: #e67e22;">{{ total_hot }}</div>
        <div style="color: #7f8c8d;">Hot Leads</div>
    </div>
    <div class="card" style="text-align: center;">
        <div style="font-size: 2.5rem; font-weight: bold; color: #f39c12;">{{ total_messages }}</div>
        <div style="color: #7f8c8d;">Messages Sent</div>
    </div>
</div>

<!-- Channel Breakdown -->
<div class="card" style="margin-bottom: 2rem;">
    <h2>ğŸ“Š Channel Performance</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem;">
        <div style="text-align: center;">
            <div style="font-size: 2rem; font-weight: bold; color: #3498db;">{{ channel_totals.email }}</div>
            <div style="color: #7f8c8d;">ğŸ“§ Emails</div>
        </div>
        <div style="text-align: center;">
            <div style="font-size: 2rem; font-weight: bold; color: #27ae60;">{{ channel_totals.whatsapp }}</div>
            <div style="color: #7f8c8d;">ğŸ“± WhatsApp</div>
        </div>
        <div style="text-align: center;">
            <div style="font-size: 2rem; font-weight: bold; color: #4267B2;">{{ channel_totals.facebook }}</div>
            <div style="color: #7f8c8d;">ğŸ‘¥ Facebook</div>
        </div>
    </div>
</div>

<!-- Campaign Stats -->
{% if stats %}
    {% for stat in stats %}
    <div class="card" style="margin-bottom: 2rem;">
        <h2 style="margin-bottom: 1rem;">{{ stat.campaign_name }}</h2>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
            <div>
                <div style="font-size: 1.5rem; font-weight: bold;">{{ stat.total_leads }}</div>
                <div style="color: #7f8c8d;">Leads</div>
            </div>
            <div>
                <div style="font-size: 1.5rem; font-weight: bold;">{{ stat.total_sent }}</div>
                <div style="color: #7f8c8d;">Messages</div>
            </div>
            <div>
                <div style="font-size: 1.5rem; font-weight: bold;">{{ stat.hot_leads }}</div>
                <div style="color: #7f8c8d;">Hot</div>
            </div>
            <div>
                <div style="font-size: 1.5rem; font-weight: bold;">{{ stat.avg_rating }}</div>
                <div style="color: #7f8c8d;">Avg Rating</div>
            </div>
        </div>
        
        <!-- Channel Stats for this campaign -->
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1rem;">
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
                <h4 style="color: #3498db;">ğŸ“§ Email</h4>
                <div>Sent: {{ stat.channel_stats.email.sent }}</div>
                <div>Failed: {{ stat.channel_stats.email.failed }}</div>
                <div>Read: {{ stat.channel_stats.email.read }}</div>
                <div>Replied: {{ stat.channel_stats.email.replied }}</div>
            </div>
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
                <h4 style="color: #27ae60;">ğŸ“± WhatsApp</h4>
                <div>Sent: {{ stat.channel_stats.whatsapp.sent }}</div>
                <div>Failed: {{ stat.channel_stats.whatsapp.failed }}</div>
                <div>Read: {{ stat.channel_stats.whatsapp.read }}</div>
                <div>Replied: {{ stat.channel_stats.whatsapp.replied }}</div>
            </div>
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
                <h4 style="color: #4267B2;">ğŸ‘¥ Facebook</h4>
                <div>Sent: {{ stat.channel_stats.facebook.sent }}</div>
                <div>Failed: {{ stat.channel_stats.facebook.failed }}</div>
                <div>Read: {{ stat.channel_stats.facebook.read }}</div>
                <div>Replied: {{ stat.channel_stats.facebook.replied }}</div>
            </div>
        </div>
        
        <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
            <h3 style="margin-bottom: 0.5rem;">ğŸ“ Top Locations:</h3>
            <pre style="font-family: inherit;">{{ stat.country_breakdown }}</pre>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="card text-center">
        <p style="color: #7f8c8d; padding: 3rem;">No campaign data yet. Create a campaign and start finding leads!</p>
    </div>
{% endif %}
{% endblock %}